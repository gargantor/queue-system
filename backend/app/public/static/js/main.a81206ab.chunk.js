(this["webpackJsonpfrond-end"]=this["webpackJsonpfrond-end"]||[]).push([[0],{122:function(e,a){},125:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(67),s=t.n(c),l=(t(75),t(5)),o=t(8),i=t(6),m=t(7),u=t(33),d=t(32),f=new(function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,[{key:"fixallHeight",value:function(){this.fixLoginRegisterHeight(),this.fixSidebarHeight(),this.fixContentHeight()}},{key:"fixLoginRegisterHeight",value:function(){var e=document.getElementsByClassName("login-box"),a=document.getElementsByClassName("register-box"),t=document.getElementsByClassName("vcenter-box"),n=document.body;if(n.style.height=null,n.style.minHeight=null,0!==t.length)n.style.height=null;else if(0===e.length&&0===a.length)n.style.height="auto";else{var r=(0===e.length?a[0]:e[0]).clientHeight;n.style.minHeight=r+"px",console.log(r)}}},{key:"fixSidebarHeight",value:function(){var e=document.getElementsByClassName("main-sidebar"),a=window.frames.innerHeight,t=document.body.clientHeight;e[0]&&(e[0].style.minHeight=t>a?t+"px":a+"px")}},{key:"fixContentHeight",value:function(){var e=document.getElementsByClassName("main-header"),a=document.getElementsByClassName("main-footer"),t=document.getElementsByClassName("content-wrapper"),n=window.frames.innerHeight;document.body.clientHeight;t[0]&&(t[0].style.minHeight=n-(e[0].clientHeight+1)-(a[0].clientHeight+1)+"px")}}]),e}()),p=t(2),v=t.n(p),b=t(1),E=t.n(b),h=t(4),g=t(15);function N(){return k.apply(this,arguments)}function k(){return(k=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e){return!!e&&Date.now()>e},y=function(e){if(!e)return null;var a=JSON.parse(atob(e.split(".")[1]));return a&&a.exp&&1e3*a.exp||null};function x(){return C.apply(this,arguments)}function C(){return(C=Object(h.a)(E.a.mark((function e(){var a,t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=JSON.parse(localStorage.getItem("user")))||!a.accessToken){e.next=22;break}if(!w(y(a.accessToken))){e.next=19;break}return console.log("isExpired"),t=a.accessToken,e.next=7,v.a.post("/api/auth/update-token",{accessToken:t});case 7:if(!(n=e.sent).data){e.next=14;break}return a=Object(g.a)(Object(g.a)({},a),{},{accessToken:n.data.accessToken}),localStorage.setItem("user",JSON.stringify(a)),e.abrupt("return",{"x-access-token":n.data.accessToken});case 14:localStorage.removeItem("user"),window.location.reload();case 16:return e.abrupt("return",{"x-access-token":n.data.accessToken});case 19:return e.abrupt("return",{"x-access-token":a.accessToken});case 20:e.next=23;break;case 22:return e.abrupt("return",{});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=new(function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,[{key:"getAll",value:function(){var e=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/counters/",e.next=4,N();case 4:return e.t2=e.sent,e.t3={headers:e.t2},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(h.a)(E.a.mark((function e(a,t,n,r){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/counters/create",e.t2={name:a,status:n,counter_code:t,services:r},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(a,t,n,r){return e.apply(this,arguments)}}()},{key:"findOne",value:function(){var e=Object(h.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/counters/edit/"+a,e.next=4,N();case 4:return e.t2=e.sent,e.t3={headers:e.t2},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"edit",value:function(){var e=Object(h.a)(E.a.mark((function e(a,t,n,r,c){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/counters/edit/"+r,e.t2={name:a,status:n,counter_code:t,services:c},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(a,t,n,r,c){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(h.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/counters/delete/"+a,e.next=4,N();case 4:return e.t2=e.sent,e.t3={headers:e.t2},e.abrupt("return",e.t0.delete.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"availableDesk",value:function(){var e=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/counters/available",e.next=4,N();case 4:return e.t2=e.sent,e.t3={headers:e.t2},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"selectDesk",value:function(){var e=Object(h.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/counters/selectdesk",e.t2={deskId:a},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"checkChosenDesk",value:function(){var e=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/counters/checkchoosen",e.next=4,N();case 4:return e.t2=e.sent,e.t3={headers:e.t2},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"closeDesk",value:function(){var e=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/counters/closedesk",e.t2={},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),j=new(function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,[{key:"getRoles",value:function(){return v.a.get("/api/getroles")}},{key:"login",value:function(e,a){return v.a.post("/api/auth/signin",{username:e,password:a}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e}))}},{key:"logout",value:function(){O.closeDesk().then((function(e){localStorage.removeItem("user")}),(function(e){console.log(e)}))}},{key:"register",value:function(e,a,t,n){return v.a.post("/api/auth/signup",{username:e,password:a,roles:t,fullname:n})}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}},{key:"test",value:function(e,a,t,n){return v.a.post("/api/signup",{username:e,password:a,roles:t,fullname:n})}}]),e}());function S(e){return r.a.createElement("nav",{className:"main-header navbar navbar-expand navbar-blue navbar-light"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link","data-widget":"pushmenu",href:"/#",role:"button"},r.a.createElement("i",{className:"fas fa-bars"}))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{className:"nav-link",activeClassName:"active",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{className:"nav-link",activeClassName:"active",to:"/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{className:"nav-link",activeClassName:"active",to:"/register"},"Register")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{className:"nav-link",activeClassName:"active",to:"/monitor"},"Monitor")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{className:"nav-link",activeClassName:"active",to:"/kiosk"},"Kiosk"))),r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item d-none d-sm-inline-block"},r.a.createElement("button",{className:"nav-link btn btn-danger btn-labeled",onClick:e.logout},r.a.createElement("span",{className:"btn-label"},r.a.createElement("i",{className:"nav-icon fas fa-power-off"})),"Logout"))))}function T(e){var a=Object(o.h)(),t=Object(o.g)();return r.a.useLayoutEffect((function(){f.fixSidebarHeight()}),[t]),r.a.useEffect((function(){}),[t]),r.a.createElement("aside",{className:"main-sidebar sidebar-dark-info elevation-4"},r.a.createElement(l.c,{to:"".concat(a.path,"/"),className:"brand-link"},r.a.createElement("img",{src:"/img/AdminLTELogo.png",alt:"AdminLTE Logo",className:"brand-image img-circle elevation-3",style:{opacity:"0.8"}}),r.a.createElement("span",{className:"brand-text font-weight-light"},"AdminLTE 3")),r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"user-panel mt-3 pb-3 mb-3 d-flex"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:"/img/avatar2.png",className:"img-circle elevation-2",alt:"User"})),r.a.createElement("div",{className:"info"},r.a.createElement(l.c,{to:"".concat(a.path,"/profile"),className:"d-block"},e.currentUser.fullname?e.currentUser.fullname:"Dummy name"))),r.a.createElement("nav",{className:"mt-2"},r.a.createElement("ul",{className:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{className:"nav-link",activeClassName:"active",to:"".concat(a.path,"/desk")},r.a.createElement("i",{className:"nav-icon fas fa-laptop-house"}),r.a.createElement("p",null,"Desk"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{className:"nav-link",activeClassName:"active",to:"".concat(a.path,"/profile")},r.a.createElement("i",{className:"nav-icon fas fa-user"}),r.a.createElement("p",null,"Profile"))),e.isModerator&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-header"},"Admin"),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{className:"nav-link",activeClassName:"active",to:"".concat(a.path,"/reports")},r.a.createElement("i",{className:"nav-icon far fa-chart-bar"}),r.a.createElement("p",null,"Reports"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{className:"nav-link",activeClassName:"active",to:"".concat(a.path,"/users")},r.a.createElement("i",{className:"nav-icon fas fa-users"}),r.a.createElement("p",null,"Users List"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{className:"nav-link",activeClassName:"active",to:"".concat(a.path,"/counters")},r.a.createElement("i",{className:"nav-icon fas fa-users"}),r.a.createElement("p",null,"Counters List"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{className:"nav-link",activeClassName:"active",to:"".concat(a.path,"/services")},r.a.createElement("i",{className:"nav-icon fas fa-users"}),r.a.createElement("p",null,"Services List"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{className:"nav-link",activeClassName:"active",to:"".concat(a.path,"/settings")},r.a.createElement("i",{className:"nav-icon fas fa-wrench"}),r.a.createElement("p",null,"Settings")))),r.a.createElement("li",{className:"nav-header"},"MISCELLANEOUS"),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.c,{className:"nav-link",activeClassName:"active",to:"/maintenance"},r.a.createElement("i",{className:"nav-icon fas fa-cog"}),r.a.createElement("p",null,"Maintenance")))))))}function _(){return r.a.createElement("footer",{className:"main-footer"},r.a.createElement("div",{className:"float-right d-none d-sm-block"},r.a.createElement("b",null,"Version")," 3.0.5"),r.a.createElement("strong",null,"Copyright \xa9 2014-2019 ",r.a.createElement("a",{href:"http://adminlte.io"},"AdminLTE.io"),".")," All rights reserved.")}function L(){return r.a.createElement("div",null,r.a.createElement("section",{className:"content-header"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row mb-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("h1",null,"Blank Page")),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("ol",{className:"breadcrumb float-sm-right"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement("a",{href:"/#"},"Home")),r.a.createElement("li",{className:"breadcrumb-item active"},"Content 1")))))),r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-title"},"Content 1"),r.a.createElement("div",{className:"card-tools"},r.a.createElement("button",{type:"button",className:"btn btn-tool","data-card-widget":"collapse","data-toggle":"tooltip",title:"Collapse"},r.a.createElement("i",{className:"fas fa-minus"})),r.a.createElement("button",{type:"button",className:"btn btn-tool","data-card-widget":"remove","data-toggle":"tooltip",title:"Remove"},r.a.createElement("i",{className:"fas fa-times"})))),r.a.createElement("div",{className:"card-body"},"Start creating your amazing application!"),r.a.createElement("div",{className:"card-footer"},"Footer"))))}function P(){return r.a.createElement("div",null,r.a.createElement("section",{className:"content-header"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row mb-2"},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("h1",null,"404 Error Page")),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("ol",{className:"breadcrumb float-sm-right"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement("a",{href:"/#"},"Home")),r.a.createElement("li",{className:"breadcrumb-item active"},"404 Error Page")))))),r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"error-page"},r.a.createElement("h2",{className:"headline text-warning"}," 404"),r.a.createElement("div",{className:"error-content"},r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fa-exclamation-triangle text-warning"})," Oops! Page not found."),r.a.createElement("p",null,"We could not find the page you were looking for.")))))}var R=t(3),U=t(10),A=t.n(U),B=A.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,onOpen:function(e){e.addEventListener("mouseenter",A.a.stopTimer),e.addEventListener("mouseleave",A.a.resumeTimer)}}),D=function(e,a){B.fire({icon:e,title:a})},H=new(function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,[{key:"ticketCount",value:function(){var e=Object(h.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/queue/getcount",e.t2={services:a},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"getCurrentTicket",value:function(){var e=Object(h.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/queue/getcurrentticket",e.t2={deskID:a},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"doneCall",value:function(){var e=Object(h.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/queue/setdone",e.t2={currentTicket:a},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"missedCall",value:function(){var e=Object(h.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/queue/setmissed",e.t2={currentTicket:a},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"nextCall",value:function(){var e=Object(h.a)(E.a.mark((function e(a,t){var n,r=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:null,e.t0=v.a,e.t1="/api/queue/nextcall",e.t2={deskID:a,services:t,currentTicket:n},e.next=6,N();case 6:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 9:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()}]),e}());function F(e){var a=e.closeDesk,t=e.socket,c=e.desk,s=Object(n.useState)(0),l=Object(R.a)(s,2),o=l[0],i=l[1],m=Object(n.useState)(0),u=Object(R.a)(m,2),d=u[0],f=u[1],p=Object(n.useState)(null),v=Object(R.a)(p,2),b=v[0],E=v[1],h=A.a.mixin({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, This ticket missed"}),g=function(){H.ticketCount(c.services).then((function(e){console.log(e.data),i(e.data.waitingCount),f(e.data.missedCount)}),(function(e){console.log(e)}))};return Object(n.useEffect)((function(){g(),b||H.getCurrentTicket(c._id).then((function(e){e.data&&E(e.data)}),(function(e){console.log(e)}));var e=0;return t&&(t.emit("joinRoom","ticketing"),t.on("TicketCountUpdate",(function(a){e++,console.log(a,e),g()})),t.on("clientToServer",(function(e){console.log("message dr lain : "+e)}))),function(){t&&t.emit("leaveRoom","ticketing")}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-5"},r.a.createElement("div",{className:"card card-primary"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-title"},"Current Number")),r.a.createElement("div",{className:"card-body text-center"},r.a.createElement("h1",{className:"display-1"},r.a.createElement("b",null,b&&b.ticket_number?b.ticket_number:"--"))),r.a.createElement("div",{className:"card-footer"},"Status : ",b&&b.ticket_number?"processing":"--"))),r.a.createElement("div",{className:"col-7"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-md-4 mb-2"},r.a.createElement("button",{onClick:function(){var e=b&&b._id?b._id:null;H.nextCall(c._id,c.services,e).then((function(e){e.data.message&&"no ticket available"===e.data.message?(console.log(e.data.message),D("info",e.data.message),E(null)):(E(e.data),g(),t.emit("TicketCalled",e.data._id))}),(function(e){console.log(e)}))},className:"btn btn-primary btn-block btn-lg btn-labeled"},r.a.createElement("span",{className:"btn-label"},r.a.createElement("i",{className:"fas fa-arrow-alt-circle-right"})),"Next")),r.a.createElement("div",{className:"col-md-4 mb-2"},r.a.createElement("button",{onClick:function(){b?t.emit("TicketReCalled",b._id):D("error","No ticket on process")},className:"btn btn-primary btn-block btn-lg btn-labeled"},r.a.createElement("span",{className:"btn-label"},r.a.createElement("i",{className:"fas fa-volume-up"})),"Recall")),r.a.createElement("div",{className:"col-md-4 mb-2"},r.a.createElement("button",{onClick:function(){b?H.doneCall(b._id).then((function(e){e.data&&(console.log(e.data),b._id===e.data._id&&(D("success","Ticket "+b.ticket_number+" Done"),E(null)))}),(function(e){console.log(e)})):D("error","No ticket on process")},className:"btn btn-success btn-block btn-lg btn-labeled"},r.a.createElement("span",{className:"btn-label"},r.a.createElement("i",{className:"far fa-check-circle"})),"Done")),r.a.createElement("div",{className:"col-md-4 mb-2"},r.a.createElement("button",{onClick:function(){b?h.fire().then((function(e){e.isConfirmed&&H.missedCall(b._id).then((function(e){e.data&&(console.log(e.data),b._id===e.data._id&&(D("question","Ticket "+b.ticket_number+" Missed"),E(null),g(),t.emit("TicketMissed",e.data._id)))}),(function(e){console.log(e)}))})):D("error","No ticket on process")},className:"btn btn-warning btn-block btn-lg btn-labeled"},r.a.createElement("span",{className:"btn-label"},r.a.createElement("i",{className:"far fa-clock"})),"Missed")),r.a.createElement("div",{className:"col-md-4 mb-2"},r.a.createElement("button",{onClick:function(){D("error","Not implemented yet")},className:"btn btn-primary btn-block btn-lg btn-labeled"},r.a.createElement("span",{className:"btn-label"},r.a.createElement("i",{className:"fas fa-sync-alt"})),"Call Miss")),r.a.createElement("div",{className:"col-md-4 mb-2"},r.a.createElement("button",{onClick:function(){D("error",b?"Not implemented yet":"No ticket on process")},className:"btn btn-info btn-block btn-lg btn-labeled"},r.a.createElement("span",{className:"btn-label"},r.a.createElement("i",{className:"fas fa-share-square"})),"Transfer")),r.a.createElement("div",{className:"col-md-4 mb-2"},r.a.createElement("button",{onClick:function(){return a()},className:"btn btn-danger btn-block btn-lg  btn-labeled"},r.a.createElement("span",{className:"btn-label"},r.a.createElement("i",{className:"fas fa-user-lock"})),"Close"))))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card card-info"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-title"},"Queue info")),r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"text-primary"},"Queue Left: ",r.a.createElement("b",null,o)),r.a.createElement("h3",{className:"text-danger"},"Missed Queue: ",r.a.createElement("b",null,d))),r.a.createElement("div",{className:"card-footer"}))))))}function I(e){return r.a.createElement("section",{className:"content-header"},r.a.createElement("div",{className:""},r.a.createElement("h1",null,e.title),e.subtitle&&r.a.createElement("p",null,e.subtitle)),e.btnLink&&r.a.createElement(l.b,{to:e.btnLink,type:"button",className:"btn btn-primary float-right"},e.btnText))}var M=t(20),q=function(e,a,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=Object(n.useState)(t||{}),s=Object(R.a)(c,2),l=s[0],o=s[1],i=Object(n.useState)({}),m=Object(R.a)(i,2),u=m[0],d=m[1],f=Object(n.useState)(!1),p=Object(R.a)(f,2),v=p[0],b=p[1],E=Object(n.useState)(!1),h=Object(R.a)(E,2),N=h[0],k=h[1],w=Object(n.useState)(!0),y=Object(R.a)(w,2),x=y[0],C=y[1],O=Object(n.useRef)(!0);Object(n.useEffect)((function(){O.current||(o(t),d({}),C(!0),b(!1),k(!1)),O.current=!1}),[t]),Object(n.useEffect)((function(){0===Object.keys(u).length&&v&&e({values:l,errors:u})}),[u]),Object(n.useEffect)((function(){r&&(b(!1),!x&&N?d(a(l)):C(!1))}),[l]);var j=function(e){e&&e.preventDefault(),d(a(l)),b(!0),k(!0)},S=function(e){if(e.persist(),e.target.multiple){var a=Array.from(e.target.selectedOptions,(function(e){return e.value}));o((function(t){return Object(g.a)(Object(g.a)({},t),{},Object(M.a)({},e.target.name,a))}))}else"checkbox"===e.target.type?o((function(a){return Object(g.a)(Object(g.a)({},a),{},Object(M.a)({},e.target.name,e.target.checked))})):o((function(a){return Object(g.a)(Object(g.a)({},a),{},Object(M.a)({},e.target.name,e.target.value))}))};return{handleChange:S,handleSubmit:j,values:l,errors:u}};function Y(e){var a=q(e.callback,e.validate),t=a.values,n=a.errors,c=a.handleChange,s=a.handleSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5 mx-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-title"},"Choose Desk")),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:s},r.a.createElement("div",{className:"form-group mb-3"},r.a.createElement("label",null,"Select Roles"),r.a.createElement("select",{className:"custom-select ".concat(n.desk&&"is-invalid"),name:"desk",onChange:c,value:t.desk||""},r.a.createElement("option",null,"Choose Desk"),e.selectDesk.map((function(e,a){return r.a.createElement("option",{key:a,value:e._id},e.counter_code)}))),n.desk&&r.a.createElement("span",{className:"error invalid-feedback"},n.desk?n.desk:"not valid")),r.a.createElement("div",{className:"row mb-10"},r.a.createElement("div",{className:"col-md-12 text-right"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fa fa-fw fa-lg fa-check-circle"})," Submit"))))))))))}var V=function(e){var a={};return e.desk||(a.desk="Please choose desk code"),a};function J(e){var a=e.socket,t=Object(n.useState)(),c=Object(R.a)(t,2),s=c[0],l=c[1],o=Object(n.useState)([]),i=Object(R.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(0),f=Object(R.a)(d,2);f[0],f[1];return Object(n.useEffect)((function(){return O.checkChosenDesk().then((function(e){l(e.data.counter)}),(function(e){console.log(e)})),function(){}}),[]),Object(n.useEffect)((function(){return s||O.availableDesk().then((function(e){u(e.data)}),(function(e){})),function(){}}),[s]),r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{title:"Desk",subtitle:s?"Counter "+s.counter_code:"please Choose Desk"}),s?r.a.createElement(F,{closeDesk:function(){console.log("desk close"),O.closeDesk().then((function(e){l(e.data.counter)}),(function(e){console.log(e)}))},socket:a,desk:s}):r.a.createElement(Y,{callback:function(e){var a=e.values;console.log("submit"),O.selectDesk(a.desk).then((function(e){console.log(e),l(e.data.counter)}),(function(e){}))},validate:V,selectDesk:m}))}var W=new(function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,[{key:"getAll",value:function(){var e=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/users/",e.next=4,N();case 4:return e.t2=e.sent,e.t3={headers:e.t2},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(h.a)(E.a.mark((function e(a,t,n,r,c,s){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/users/create",e.t2={username:a,email:t,name:n,address:r,roles:c,password:s},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(a,t,n,r,c,s){return e.apply(this,arguments)}}()},{key:"findOne",value:function(){var e=Object(h.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/users/edit/"+a,e.next=4,N();case 4:return e.t2=e.sent,e.t3={headers:e.t2},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"edit",value:function(){var e=Object(h.a)(E.a.mark((function e(a,t,n,r,c){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/users/edit/"+a,e.t2={email:t,name:n,address:r,roles:c},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(a,t,n,r,c){return e.apply(this,arguments)}}()},{key:"getProfile",value:function(){var e=Object(h.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/users/profile/",e.t2={id:a},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"profileUpdate",value:function(){var e=Object(h.a)(E.a.mark((function e(a,t,n,r){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/users/profile-update/",e.t2={id:a,email:t,name:n,address:r},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(a,t,n,r){return e.apply(this,arguments)}}()},{key:"passwordUpdate",value:function(){var e=Object(h.a)(E.a.mark((function e(a,t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/users/password-update/",e.t2={id:a,password:t},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(h.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/users/delete/"+a,e.next=4,N();case 4:return e.t2=e.sent,e.t3={headers:e.t2},e.abrupt("return",e.t0.delete.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}]),e}());function z(){var e=A.a.mixin({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}),a=Object(n.useState)([]),t=Object(R.a)(a,2),c=t[0],s=t[1],o=function(){W.getAll().then((function(e){s(e.data)}),(function(e){}))};return Object(n.useEffect)((function(){return o(),function(){}}),[]),r.a.createElement("div",null,r.a.createElement(I,{title:"Users",subtitle:"List of all users",btnLink:"/dashboard/users/create",btnText:"Add User"}),r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{id:"table-user",className:"table table-bordered table-hover"},r.a.createElement("thead",{className:"text-center"},r.a.createElement("tr",{className:""},r.a.createElement("th",{style:{width:"10%"}},"#"),r.a.createElement("th",{className:""},"Username"),r.a.createElement("th",{className:""},"Name"),r.a.createElement("th",{className:""},"Email"),r.a.createElement("th",{className:""},"Address"),r.a.createElement("th",{className:""},"Role"),r.a.createElement("th",{className:"text-danger "},r.a.createElement("i",{className:"fa fa-bolt"})," "))),r.a.createElement("tbody",null,c.map((function(a,t){return r.a.createElement("tr",{className:"",key:t},r.a.createElement("td",{className:"text-center"},t+1),r.a.createElement("td",{className:""},a.username),r.a.createElement("td",{className:"text-center"},a.name),r.a.createElement("td",{className:"text-center"},a.email),r.a.createElement("td",{className:"text-center"},a.address),r.a.createElement("td",{className:"text-center"},a.roles.map((function(e,a){return 0===a?e.name:", "+e.name}))),r.a.createElement("td",{className:"text-center "},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Second group"},r.a.createElement(l.b,{to:"/dashboard/users/".concat(a._id,"/edit"),type:"button",className:"btn btn-sm btn-primary"},r.a.createElement("i",{className:"fa fa-edit"})),r.a.createElement("button",{onClick:function(){return t=a._id,void e.fire().then((function(e){e.isConfirmed&&W.delete(t).then((function(e){o(),D("success",e.data.message)})).catch((function(e){D("error",e.response.data.message)}))}));var t},type:"button",className:"btn btn-sm btn-danger"},r.a.createElement("i",{className:"fa fa-trash"})))))}))))))))))}var Q=new(function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,[{key:"getServices",value:function(){var e=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/services/",e.next=4,N();case 4:return e.t2=e.sent,e.t3={headers:e.t2},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(h.a)(E.a.mark((function e(a,t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/services/create",e.t2={name:a,status:t},e.next=5,N();case 5:return e.t3=e.sent,e.t4={headers:e.t3},e.abrupt("return",e.t0.post.call(e.t0,e.t1,e.t2,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()},{key:"findOne",value:function(){var e=Object(h.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/services/edit/"+a,e.next=4,N();case 4:return e.t2=e.sent,e.t3={headers:e.t2},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()},{key:"edit",value:function(){var e=Object(h.a)(E.a.mark((function e(a,t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.a.post("/api/services/edit/"+n,{name:a,status:t},{headers:N()}));case 1:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(h.a)(E.a.mark((function e(a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/services/delete/"+a,e.next=4,N();case 4:return e.t2=e.sent,e.t3={headers:e.t2},e.abrupt("return",e.t0.delete.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()}]),e}());function K(){var e=A.a.mixin({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}),a=Object(n.useState)([]),t=Object(R.a)(a,2),c=t[0],s=t[1],o=function(){Q.getServices().then((function(e){s(e.data)}),(function(e){}))};return Object(n.useEffect)((function(){return o(),function(){}}),[]),r.a.createElement("div",null,r.a.createElement(I,{title:"Services",subtitle:"List of all services",btnLink:"/dashboard/services/create",btnText:"Add Service"}),r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{id:"table-user",className:"table table-bordered table-hover"},r.a.createElement("thead",{className:"text-center"},r.a.createElement("tr",{className:""},r.a.createElement("th",{style:{width:"10%"}},"#"),r.a.createElement("th",{className:""},"Service Name"),r.a.createElement("th",{className:""},"Status"),r.a.createElement("th",{className:"text-danger "},r.a.createElement("i",{className:"fa fa-bolt"})," "))),r.a.createElement("tbody",null,c.map((function(a,t){return r.a.createElement("tr",{className:"",key:t},r.a.createElement("td",{className:"text-center"},t+1),r.a.createElement("td",{className:""},a.name),r.a.createElement("th",{className:"text-center"},a.status?"Open":"Closed"),r.a.createElement("td",{className:"text-center "},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Second group"},r.a.createElement(l.b,{to:"/dashboard/services/".concat(a._id,"/edit"),type:"button",className:"btn btn-sm btn-primary"},r.a.createElement("i",{className:"fa fa-edit"})),r.a.createElement("button",{onClick:function(){return t=a._id,void e.fire().then((function(e){e.isConfirmed&&Q.delete(t).then((function(e){o(),D("success",e.data.message)})).catch((function(e){D("error",e.response.data.message)}))}));var t},type:"button",className:"btn btn-sm btn-danger"},r.a.createElement("i",{className:"fa fa-trash"})))))}))))))))))}function $(e){var a=q(e.callback,e.validate,e.initialValues),t=a.values,n=a.errors,c=a.handleChange,s=a.handleSubmit,l=Object(o.i)((function(e){return r.a.createElement("button",{onClick:function(){e.history.push("/dashboard/services")},className:"btn btn-danger mx-3",type:"button"},r.a.createElement("i",{className:"fa fa-fw fa-lg fa-times-circle"})," Cancel")}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:s},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",className:"form-control ".concat(n.name&&"is-invalid"),placeholder:"Name",name:"name",value:t.name||"",onChange:c}),n.name&&r.a.createElement("span",{className:"error invalid-feedback"},n.name?n.name:"not valid")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Status"),r.a.createElement("div",{className:"custom-control custom-switch custom-switch-off-danger custom-switch-on-success"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"statusService",name:"status",checked:t.status||!1,onChange:c}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"statusService"},t.status?"Open":"Closed"))),r.a.createElement("div",{className:"row mb-10"},r.a.createElement("div",{className:"col-md-12 text-right"},r.a.createElement(l,null),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fa fa-fw fa-lg fa-check-circle"})," Save")))))}var G=function(e){var a={};return e.name||(a.name="Name is required"),a};function X(e){var a=Object(n.useState)({}),t=Object(R.a)(a,2),c=t[0],s=t[1],l="Create new Service",o=e.match.params.id?function(a){var t=a.values;Q.edit(t.name,t.status,e.match.params.id).then((function(a){D("success",a.data.message),e.history.push("/dashboard/services")})).catch((function(e){D("error",e.response.data.message)}))}:function(a){var t=a.values;Q.create(t.name,t.status).then((function(a){D("success",a.data.message),e.history.push("/dashboard/services")})).catch((function(e){D("error",e.response.data.message)}))};e.match.params.id&&(l="Edit Service"),Object(n.useEffect)((function(){e.match.params.id&&Q.findOne(e.match.params.id).then((function(e){s(e.data)})).catch((function(a){404===a.response.status&&e.history.push("/dashboard/oops"),console.log(a)}))}),[]);c.name;return Object(n.useEffect)((function(){c.name}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{title:"Services",subtitle:l}),r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 mx-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-title"},l," ",c.name)),r.a.createElement("div",{className:"card-body"},r.a.createElement($,{callback:o,validate:G,initialValues:c})))))))}function Z(){var e=A.a.mixin({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}),a=Object(n.useState)([]),t=Object(R.a)(a,2),c=t[0],s=t[1],o=function(){O.getAll().then((function(e){console.log(e.data),s(e.data)}),(function(e){}))};return Object(n.useEffect)((function(){return o(),function(){}}),[]),r.a.createElement("div",null,r.a.createElement(I,{title:"Counters",subtitle:"List of all counters",btnLink:"/dashboard/counters/create",btnText:"Add Counter"}),r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{id:"table-user",className:"table table-bordered table-hover"},r.a.createElement("thead",{className:"text-center"},r.a.createElement("tr",{className:""},r.a.createElement("th",{style:{width:"10%"}},"#"),r.a.createElement("th",{className:""},"Counter Name"),r.a.createElement("th",{className:""},"Code"),r.a.createElement("th",{className:""},"Status"),r.a.createElement("th",{className:""},"Service"),r.a.createElement("th",{className:""},"User"),r.a.createElement("th",{className:"text-danger "},r.a.createElement("i",{className:"fa fa-bolt"})," "))),r.a.createElement("tbody",null,c.map((function(a,t){return r.a.createElement("tr",{className:"",key:t},r.a.createElement("td",{className:"text-center"},t+1),r.a.createElement("td",{className:""},a.name),r.a.createElement("td",{className:"text-center"},a.counter_code),r.a.createElement("td",{className:"text-center"},a.status?"Open":"Closed"),r.a.createElement("td",{className:""},a.services.map((function(e,a){return 0===a?e.name:", "+e.name}))),r.a.createElement("td",{className:"text-center"},a.user&&a.user.username?a.user.username:""),r.a.createElement("td",{className:"text-center "},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Second group"},r.a.createElement(l.b,{to:"/dashboard/counters/".concat(a._id,"/edit"),type:"button",className:"btn btn-sm btn-primary"},r.a.createElement("i",{className:"fa fa-edit"})),r.a.createElement("button",{onClick:function(){return t=a._id,void e.fire().then((function(e){e.isConfirmed&&O.delete(t).then((function(e){o(),D("success",e.data.message)})).catch((function(e){D("error",e.response.data.message)}))}));var t},type:"button",className:"btn btn-sm btn-danger"},r.a.createElement("i",{className:"fa fa-trash"})))))}))))))))))}var ee=new(function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,[{key:"getServices",value:function(){return v.a.get("/api/kiosk/get-service",{headers:N()})}},{key:"makeTicket",value:function(e){return v.a.post("/api/kiosk/make-ticket",{serviceId:e},{headers:N()})}}]),e}());function ae(e){var a=q(e.callback,e.validate,e.initialValues),t=a.values,c=a.errors,s=a.handleChange,l=a.handleSubmit,i=Object(n.useState)(["wowowo"]),m=Object(R.a)(i,2),u=m[0],d=m[1],f=Object(o.i)((function(e){return r.a.createElement("button",{onClick:function(){e.history.push("/dashboard/counters")},className:"btn btn-danger mx-3",type:"button"},r.a.createElement("i",{className:"fa fa-fw fa-lg fa-times-circle"})," Cancel")}));return Object(n.useEffect)((function(){ee.getServices().then((function(e){d(e.data)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:l},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",className:"form-control ".concat(c.name&&"is-invalid"),placeholder:"Name",name:"name",value:t.name||"",onChange:s}),c.name&&r.a.createElement("span",{className:"error invalid-feedback"},c.name?c.name:"not valid")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Code a"),r.a.createElement("input",{type:"number",min:"1",step:"1",className:"form-control ".concat(c.counter_code&&"is-invalid"),placeholder:"counter code",name:"counter_code",value:t.counter_code||"",onChange:s}),c.counter_code&&r.a.createElement("span",{className:"error invalid-feedback"},c.counter_code?c.counter_code:"not valid")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Status"),r.a.createElement("div",{className:"custom-control custom-switch custom-switch-off-danger custom-switch-on-success"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"statusService",name:"status",checked:t.status||!1,onChange:s}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"statusService"},t.status?"Open":"Closed"))),r.a.createElement("div",{className:"form-group mb-3"},r.a.createElement("label",null,"Select Services"),r.a.createElement("select",{className:"custom-select",multiple:!0,name:"services",onChange:s,value:t.services||[],size:"3"},u.map((function(e,a){return r.a.createElement("option",{key:a,value:e._id},e.name)})))),r.a.createElement("div",{className:"row mb-10"},r.a.createElement("div",{className:"col-md-12 text-right"},r.a.createElement(f,null),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fa fa-fw fa-lg fa-check-circle"})," Save")))))}var te=function(e){var a={};return e.name||(a.name="Name is required"),e.counter_code||(a.counter_code="Code is required"),e.counter_code<=0&&(a.counter_code="Code is invalid"),Number.isInteger(parseFloat(e.counter_code))||(a.counter_code="Code must be whole number"),a};function ne(e){var a=Object(n.useState)({}),t=Object(R.a)(a,2),c=t[0],s=t[1],l="Create new Counter",o=e.match.params.id?function(a){var t=a.values;console.log("edit"),console.log(t.counter_code);var n=Number.isInteger(t.counter_code);console.log(n),O.edit(t.name,t.counter_code,t.status,e.match.params.id,t.services).then((function(a){D("success",a.data.message),e.history.push("/dashboard/counters")})).catch((function(e){D("error",e.response.data.message)}))}:function(a){var t=a.values;console.log("create"),console.log(t.counter_code),O.create(t.name,t.counter_code,t.status,t.services).then((function(a){D("success",a.data.message),e.history.push("/dashboard/counters")})).catch((function(e){D("error",e.response.data.message)}))};e.match.params.id&&(l="Edit Counter"),Object(n.useEffect)((function(){e.match.params.id&&O.findOne(e.match.params.id).then((function(e){s(e.data)})).catch((function(a){404===a.response.status&&e.history.push("/dashboard/oops"),console.log(a)}))}),[]);c.name;return Object(n.useEffect)((function(){c.name}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{title:"Counters",subtitle:l}),r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 mx-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-title"},l," ",c.name)),r.a.createElement("div",{className:"card-body"},r.a.createElement(ae,{callback:o,validate:te,initialValues:c})))))))}function re(e){var a=q(e.callback,e.validate,e.initialValues),t=a.values,n=a.errors,c=a.handleChange,s=a.handleSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:s},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",className:"form-control ".concat(n.username&&"is-invalid"),placeholder:"Name",name:"username",value:t.username||"asdasd",onChange:c,disabled:!0}),n.name&&r.a.createElement("span",{className:"error invalid-feedback"},n.name?n.name:"not valid")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",className:"form-control ".concat(n.name&&"is-invalid"),placeholder:"Email",name:"email",value:t.email||"",onChange:c}),n.name&&r.a.createElement("span",{className:"error invalid-feedback"},n.email?n.email:"not valid")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",className:"form-control ".concat(n.name&&"is-invalid"),placeholder:"Name",name:"name",value:t.name||"",onChange:c}),n.name&&r.a.createElement("span",{className:"error invalid-feedback"},n.name?n.name:"not valid")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Address"),r.a.createElement("input",{type:"text",className:"form-control ".concat(n.address&&"is-invalid"),placeholder:"Name",name:"address",value:t.address||"",onChange:c}),n.name&&r.a.createElement("span",{className:"error invalid-feedback"},n.address?n.address:"not valid")),r.a.createElement("div",{className:"row mb-10"},r.a.createElement("div",{className:"col-md-12 text-right"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fa fa-fw fa-lg fa-check-circle"})," Save")))))}function ce(e){var a=q(e.callback,e.validate),t=a.values,n=a.errors,c=a.handleChange,s=a.handleSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:s},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"form-control ".concat(n.password&&"is-invalid"),placeholder:"Password",name:"password",value:t.password||"",onChange:c}),n.name&&r.a.createElement("span",{className:"error invalid-feedback"},n.password?n.password:"not valid")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{type:"password",className:"form-control ".concat(n.passwordConfirm&&"is-invalid"),placeholder:"Confirm Password",name:"passwordConfirm",value:t.passwordConfirm||"",onChange:c}),n.name&&r.a.createElement("span",{className:"error invalid-feedback"},n.passwordConfirm?n.passwordConfirm:"not valid")),r.a.createElement("div",{className:"row mb-10"},r.a.createElement("div",{className:"col-md-12 text-right"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fa fa-fw fa-lg fa-check-circle"})," Save")))))}var se=function(e){return{}},le=function(e){var a={};return e.password||(a.password="Password is required"),e.passwordConfirm?e.passwordConfirm!==e.password&&(a.passwordConfirm="Password not match"):a.passwordConfirm="Please Re-type password",a};function oe(e){var a=Object(n.useState)({}),t=Object(R.a)(a,2),c=t[0],s=t[1],l=Object(n.useState)(JSON.parse(localStorage.getItem("user"))),o=Object(R.a)(l,2),i=o[0];o[1];return Object(n.useEffect)((function(){W.getProfile(i.id).then((function(e){s(e.data)})).catch((function(a){404===a.response.status&&e.history.push("/dashboard/oops"),console.log(a)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{title:"Profile"}),r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row profile"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"card p-0"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"nav flex-column nav-pills user-tabs",role:"tablist","aria-orientation":"vertical"},r.a.createElement("a",{className:"nav-link active","data-toggle":"pill",href:"#profile-card",role:"tab","aria-controls":"profile-card","aria-selected":"true"},"Profile"),r.a.createElement("a",{className:"nav-link","data-toggle":"pill",href:"#change-password-card",role:"tab","aria-controls":"#change-password-card","aria-selected":"false"},"Change Password"))))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"tab-content",id:"vert-tabs-tabContent"},r.a.createElement("div",{className:"tab-pane fade show active",id:"profile-card",role:"tabpanel","aria-labelledby":"profile-card-tab"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(re,{callback:function(e){var a=e.values;console.log("submit"),W.profileUpdate(i.id,a.email,a.name,a.address).then((function(e){D("success",e.data.message)})).catch((function(e){D("error",e.response.data.message)}))},validate:se,initialValues:c})))),r.a.createElement("div",{className:"tab-pane fade",id:"change-password-card",role:"tabpanel","aria-labelledby":"change-password-card-tab"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-title"},"Change Password")),r.a.createElement("div",{className:"card-body"},r.a.createElement(ce,{callback:function(e){var a=e.values;console.log(a),W.passwordUpdate(i.id,a.password).then((function(e){D("success",e.data.message)})).catch((function(e){D("error",e.response.data.message)}))},validate:le})))))))))}function ie(e){var a=q(e.callback,e.validate,e.initialValues),t=a.values,c=a.errors,s=a.handleChange,l=a.handleSubmit,i=Object(n.useState)(["user","moder","admin"]),m=Object(R.a)(i,2),u=m[0],d=m[1];Object(n.useEffect)((function(){j.getRoles().then((function(e){d(e.data)}),(function(e){}))}),[]);var f=Object(o.i)((function(e){return r.a.createElement("button",{onClick:function(){e.history.push("/dashboard/users")},className:"btn btn-danger mx-3",type:"button"},r.a.createElement("i",{className:"fa fa-fw fa-lg fa-times-circle"})," Cancel")}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:l},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",className:"form-control ".concat(c.username&&"is-invalid"),placeholder:"Name",name:"username",value:t.username||"",onChange:s,disabled:e.isEditing}),c.name&&r.a.createElement("span",{className:"error invalid-feedback"},c.name?c.name:"not valid")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",className:"form-control ".concat(c.name&&"is-invalid"),placeholder:"Email",name:"email",value:t.email||"",onChange:s}),c.name&&r.a.createElement("span",{className:"error invalid-feedback"},c.email?c.email:"not valid")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",className:"form-control ".concat(c.name&&"is-invalid"),placeholder:"Name",name:"name",value:t.name||"",onChange:s}),c.name&&r.a.createElement("span",{className:"error invalid-feedback"},c.name?c.name:"not valid")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Address"),r.a.createElement("textarea",{className:"form-control ".concat(c.address&&"is-invalid"),placeholder:"Address",name:"address",onChange:s,value:t.address||""}),c.name&&r.a.createElement("span",{className:"error invalid-feedback"},c.address?c.address:"not valid")),r.a.createElement("div",{className:"form-group mb-3"},r.a.createElement("label",null,"Select Roles"),r.a.createElement("select",{className:"custom-select",multiple:!0,name:"roles",onChange:s,value:t.roles||[],size:"3"},u.map((function(e,a){return r.a.createElement("option",{key:a,value:e.name},e.name)})))),!e.isEditing&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"form-control ".concat(c.password&&"is-invalid"),placeholder:"Password",name:"password",value:t.password||"",onChange:s}),c.name&&r.a.createElement("span",{className:"error invalid-feedback"},c.password?c.password:"not valid")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{type:"password",className:"form-control ".concat(c.passwordConfirm&&"is-invalid"),placeholder:"Confirm Password",name:"passwordConfirm",value:t.passwordConfirm||"",onChange:s}),c.name&&r.a.createElement("span",{className:"error invalid-feedback"},c.passwordConfirm?c.passwordConfirm:"not valid"))),r.a.createElement("div",{className:"row mb-10"},r.a.createElement("div",{className:"col-md-12 text-right"},r.a.createElement(f,null),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},r.a.createElement("i",{className:"fa fa-fw fa-lg fa-check-circle"})," Save")))))}var me=function(e){var a={};return e.username?e.username.length<3&&(a.username="Username minimal containt 3 character"):a.username="Username is required",e.password||(a.password="Password is required"),e.passwordConfirm?e.passwordConfirm!==e.password&&(a.passwordConfirm="Password not match"):a.passwordConfirm="Please Re-type password",a},ue=function(e){var a={};return e.username?e.username.length<3&&(a.username="Username minimal containt 3 character"):a.username="Username is required",a},de=function(e){var a={};return e.password||(a.password="Password is required"),e.passwordConfirm?e.passwordConfirm!==e.password&&(a.passwordConfirm="Password not match"):a.passwordConfirm="Please Re-type password",a};function fe(e){var a=Object(n.useState)({}),t=Object(R.a)(a,2),c=t[0],s=t[1],l="Create new User",o=e.match.params.id?function(a){var t=a.values;console.log("edit"),W.edit(e.match.params.id,t.email,t.name,t.address,t.roles).then((function(a){D("success",a.data.message),e.history.push("/dashboard/users")})).catch((function(e){D("error",e.response.data.message)}))}:function(a){var t=a.values;console.log("create"),W.create(t.username,t.email,t.name,t.address,t.roles,t.password).then((function(a){D("success",a.data.message),e.history.push("/dashboard/users")})).catch((function(e){D("error",e.response.data.message)}))},i=!!e.match.params.id,m=e.match.params.id?ue:me;return e.match.params.id&&(l="Edit User"),Object(n.useEffect)((function(){e.match.params.id&&W.findOne(e.match.params.id).then((function(e){s(e.data)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{title:"Users",subtitle:l}),r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row"},i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"card p-0"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"nav flex-column nav-pills user-tabs",role:"tablist","aria-orientation":"vertical"},r.a.createElement("a",{className:"nav-link active","data-toggle":"pill",href:"#profile-card",role:"tab","aria-controls":"profile-card","aria-selected":"true"},"Profile"),r.a.createElement("a",{className:"nav-link","data-toggle":"pill",href:"#change-password-card",role:"tab","aria-controls":"#change-password-card","aria-selected":"false"},"Change Password"))))),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("div",{className:"tab-content",id:"vert-tabs-tabContent"},r.a.createElement("div",{className:"tab-pane fade show active",id:"profile-card",role:"tabpanel","aria-labelledby":"profile-card-tab"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-title"},l," ",c.name)),r.a.createElement("div",{className:"card-body"},r.a.createElement(ie,{callback:o,validate:m,initialValues:c,isEditing:i})))),r.a.createElement("div",{className:"tab-pane fade",id:"change-password-card",role:"tabpanel","aria-labelledby":"change-password-card-tab"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-title"},"Change Password")),r.a.createElement("div",{className:"card-body"},r.a.createElement(ce,{callback:function(a){var t=a.values;console.log(t),W.passwordUpdate(e.match.params.id,t.password).then((function(a){D("success",a.data.message),e.history.push("/dashboard/users")})).catch((function(e){D("error",e.response.data.message)}))},validate:de}))))))),!i&&r.a.createElement("div",{className:"col-md-8 mx-auto"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-title"},l," ",c.name)),r.a.createElement("div",{className:"card-body"},r.a.createElement(ie,{callback:o,validate:m,initialValues:c,isEditing:i})))))))}var pe=t(30),ve=t.n(pe),be=new(function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,[{key:"resetCounter",value:function(){var e=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/settings/reset-count",e.next=4,N();case 4:return e.t2=e.sent,e.t3={headers:e.t2},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getCounter",value:function(){var e=Object(h.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.a,e.t1="/api/settings/get-count",e.next=4,N();case 4:return e.t2=e.sent,e.t3={headers:e.t2},e.abrupt("return",e.t0.get.call(e.t0,e.t1,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}());function Ee(){var e=Object(n.useState)(),a=Object(R.a)(e,2),t=a[0],c=a[1],s=A.a.mixin({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, reset it!"}),l=function(){be.getCounter().then((function(e){console.log(e.data),c(e.data)})).catch((function(e){console.log(e)}))};return Object(n.useEffect)((function(){return l(),function(){}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{title:"Settings"}),r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("button",{onClick:function(){s.fire().then((function(e){e.isConfirmed&&(console.log("reseted"),be.resetCounter().then((function(e){D("success",e.data.message),l()})).catch((function(e){D("error",e.response.data.message)})))}))},className:"btn btn-success btn-lg"},"Reset Ticket Count"),t&&r.a.createElement("div",null,t.map((function(e,a){return r.a.createElement("p",{key:a},"Service Name:  ",e.service&&e.service.name?e.service.name:"no service","- ticket count: ",e.sequence_value)})))))))))}var he=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).setupSocket=function(){if(!n.state.socket){console.log("not socketed");var e=ve()();e.on("connect",(function(){console.log("Socket connected")})),e.on("disconnect",(function(){console.log("disconnect from setupsocket"),n.setState({socket:null}),setTimeout(n.setupSocket,3e3)})),e.on("TicketCountUpdate",(function(e){console.log("from dashboard: "+e)})),n.setState({socket:e})}},n.logout=function(){j.logout(),n.setState({currentUser:""})},n.state={isModerator:!1,isAdmin:!1,currentUser:j.getCurrentUser(),token:"",socket:null},n}return Object(m.a)(t,[{key:"componentDidMount",value:function(){document.body.classList.add("sidebar-mini"),f.fixLoginRegisterHeight(),f.fixContentHeight();var e=j.getCurrentUser();e&&this.setState({currentUser:e,isModerator:e.roles.includes("ROLE_MODERATOR"),isAdmin:e.roles.includes("ROLE_ADMIN")}),this.setupSocket()}},{key:"componentWillUnmount",value:function(){console.log("will unmount"),this.state.socket&&(console.log("disconnect will unmount"),this.state.socket.disconnect())}},{key:"render",value:function(){var e=this.props.match.path,a=this.state,t=a.currentUser,n=a.isModerator,c=(a.isAdmin,a.token,a.socket);return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{logout:this.logout}),r.a.createElement(T,{isModerator:n,currentUser:t}),r.a.createElement("div",{className:"content-wrapper"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"".concat(e,"/desk")},r.a.createElement(J,{socket:c})),r.a.createElement(o.b,{path:"".concat(e,"/profile")},r.a.createElement(oe,null)),r.a.createElement(o.b,{path:"".concat(e,"/reports")},r.a.createElement(L,null)),r.a.createElement(o.b,{exact:!0,path:"".concat(e,"/users")},r.a.createElement(z,null)),r.a.createElement(o.b,{exact:!0,path:"".concat(e,"/users/create"),component:fe}),r.a.createElement(o.b,{exact:!0,path:"".concat(e,"/users/:id/edit"),component:fe}),r.a.createElement(o.b,{exact:!0,path:"".concat(e,"/counters")},r.a.createElement(Z,null)),r.a.createElement(o.b,{exact:!0,path:"".concat(e,"/counters/create"),component:ne}),r.a.createElement(o.b,{exact:!0,path:"".concat(e,"/counters/:id/edit"),component:ne}),r.a.createElement(o.b,{exact:!0,path:"".concat(e,"/services")},r.a.createElement(K,null)),r.a.createElement(o.b,{exact:!0,path:"".concat(e,"/services/create"),component:X}),r.a.createElement(o.b,{path:"".concat(e,"/services/:id/edit"),component:X}),r.a.createElement(o.b,{path:"".concat(e,"/settings")},r.a.createElement(Ee,null)),r.a.createElement(o.b,{exact:!0,path:e},r.a.createElement(L,null)),r.a.createElement(o.b,null,r.a.createElement(P,null)))),r.a.createElement(_,null)):r.a.createElement(o.a,{to:"/login"})}}]),t}(r.a.Component),ge=function(e){return r.a.createElement("div",{className:"text-center d-print-block d-none ticket-print"},""!==e.ticket.serviceName?r.a.createElement("h3",null,e.ticket.serviceName):"",r.a.createElement("h3",null,"Ticket Number"),r.a.createElement("h2",null,e.ticket.ticket_number))};function Ne(){var e=Object(n.useState)(["dummy Service"]),a=Object(R.a)(e,2),t=a[0],c=a[1],s=Object(n.useState)({}),l=Object(R.a)(s,2),o=l[0],i=l[1],m=Object(n.useState)(!0),u=Object(R.a)(m,2),d=u[0],f=u[1],p=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";ee.makeTicket(e).then((function(e){e.data.serviceName=a,i(e.data)})).catch((function(e){console.log(e)}))};return r.a.useEffect((function(){return document.body.classList.add("kiosk-page"),ee.getServices().then((function(e){c(e.data)})).catch((function(e){console.log(e)})),function(){document.body.classList.remove("kiosk-page")}}),[]),r.a.useEffect((function(){d?f(!1):window.print()}),[o]),r.a.createElement("div",null,r.a.createElement("div",{className:"card kiosk-box d-print-none"},r.a.createElement("div",{className:"card-header"},"Print Ticket"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"d-flex flex-wrap justify-content-center"},t.map((function(e,a){return r.a.createElement("button",{key:a,className:"print-button btn bg-gradient-primary btn-lg btn-block",onClick:function(){return function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";p(e,a)}(e._id,e.name)}},e.name)}))))),o&&r.a.createElement(ge,{ticket:o}))}var ke=function(e){var a={};return e.username||(a.username="Username is required"),e.password||(a.password="Password is required"),a};function we(e){var a=q((function(a){j.login(t.username,t.password).then((function(a){console.log(a.data),D("success","welcome "+a.data.username),e.history.push("/")})).catch((function(e){console.log(e),D("error",e.response.data.message)}))}),ke),t=a.values,c=a.errors,s=a.handleChange,o=a.handleSubmit;return Object(n.useEffect)((function(){return document.body.classList.add("login-page"),f.fixLoginRegisterHeight(),function(){document.body.classList.remove("login-page")}}),[]),r.a.createElement("div",{className:"login-box"},r.a.createElement("div",{className:"login-logo"},r.a.createElement("b",null,"Admin"),"LTE"),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body login-card-body"},r.a.createElement("p",{className:"login-box-msg"},"Sign in to start your session"),r.a.createElement("form",{onSubmit:o},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",className:"form-control ".concat(c.username?"is-invalid":""),placeholder:"Username",onChange:s,name:"username",value:t.username||""}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{className:"fas fa-user"}))),c.username&&r.a.createElement("span",{className:"error invalid-feedback"},c.username?c.username:"not valid")),r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"password",className:"form-control ".concat(c.password&&"is-invalid"),placeholder:"Password",onChange:s,name:"password",value:t.password||""}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{className:"fas fa-lock"}))),c.password&&r.a.createElement("span",{className:"error invalid-feedback"},c.password?c.password:"not valid")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement("div",{className:"icheck-primary"},r.a.createElement("input",{type:"checkbox",id:"remember"}),r.a.createElement("label",{htmlFor:"remember"},"Remember Me"))),r.a.createElement("div",{className:"col-4"},r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Sign In")))),r.a.createElement("p",{className:"mb-0"},r.a.createElement(l.b,{to:"/register",className:"text-center"},"Register a new membership")))))}var ye=t(69),xe=t(43),Ce=new(function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,[{key:"getAudio",value:function(){return v.a.get("/api/monitor/getaudio",{headers:N()})}},{key:"getTicket",value:function(e){return v.a.post("/api/monitor/get-ticket",{id:e},{headers:N()})}}]),e}()),Oe=t(42),je=t.n(Oe),Se=r.a.createContext({audioList:null});r.a.createContext({audioList:null});function Te(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Se.Consumer,null,(function(e){return r.a.createElement("div",null,(e||[]).map((function(e,a){return r.a.createElement("audio",{key:a,id:"audio".concat(e.ID),className:"audioitem",src:e.link},e.file)})))})))}function _e(e){var a=e.calling,t=e.currentCall,n=e.ticketCalled;console.log(n);for(var c=[],s=0;s<12;s++)c.push(r.a.createElement("div",{key:s,className:"col"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body "},r.a.createElement("div",{className:"row d-flex align-items-center"},r.a.createElement("h2",{className:"flex-fill text-blue align-self-center"},"Counter ",n[s]&&n[s].counter&&n[s].counter.counter_code?n[s].counter.counter_code:"--"),r.a.createElement("h1",{className:"flex-fill align-self-center"},r.a.createElement("b",null,n[s]&&n[s].ticket_number?n[s].ticket_number:"--")))))));return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"content"},r.a.createElement("div",{className:"row d-flex"},r.a.createElement("div",{className:"col-md-6 d-flex"},r.a.createElement("div",{className:"card align-self-stretch col-12"},r.a.createElement("div",{className:"card-body text-center ".concat(a&&"blink")},r.a.createElement("p",null,"ticket number"),r.a.createElement("span",{className:"display-3"},r.a.createElement("b",null,t&&t.ticket_number?t.ticket_number:"--")),r.a.createElement("p",null,"Please proceed to"),r.a.createElement("h2",{className:"text-blue"},"Counter ",t&&t.counter&&t.counter.counter_code?t.counter.counter_code:"--")))),r.a.createElement("div",{className:"col-md-6 d-flex"},r.a.createElement("div",{className:"card align-self-stretch col-12"},r.a.createElement("div",{className:"card-body"},r.a.createElement("svg",{className:"bd-placeholder-img bd-placeholder-img-lg img-fluid",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",focusable:"false",role:"img","aria-label":"Placeholder: Responsive image"},r.a.createElement("title",null,"Placeholder"),r.a.createElement("rect",{width:"100%",height:"100%",fill:"#868e96"}),r.a.createElement("text",{x:"50%",y:"50%",fill:"#dee2e6",dy:".3em"},"Responsive image")))))),r.a.createElement("div",{className:"row row-cols-4"},c)))}var Le=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).getAudio=function(){Ce.getAudio().then((function(e){n.setState({audioList:e.data})})).catch((function(e){console.log(e)}))},n.setupSocket=function(){var e=n.state.socket;if(console.log("setupSocket"),!e){var a=ve()();a.on("connect",(function(){console.log("Socket connected")})),a.on("disconnect",(function(){console.log("disconnect from setupsocket"),n.setState({socket:null}),setTimeout(n.setupSocket,3e3)})),a.emit("joinRoom","monitor"),a.on("calling",(function(e){console.log("should call ticket : "+e),n.getTicket(e)})),a.on("reCalling",(function(e){console.log("should Recall ticket : "+e),n.getTicket(e,!1)})),n.setState({socket:a})}},n.dismantleSocket=function(){var e=n.state.socket;e&&(e.off("calling",(function(){console.log("off calling")})),e.emit("leaveRoom","monitor"),e.disconnect(),n.setState({socket:null}))},n.getTicket=function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ce.getTicket(e).then((function(e){var t=e.data;t.iscallNext=a,n.setState((function(e){return{callTicket:[].concat(Object(xe.a)(e.callTicket),[t])}}))})).catch((function(e){}))},n.recursiveCalling=Object(h.a)(E.a.mark((function e(){var a,t,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.calling){e.next=9;break}if(console.log("recursiveCalling"),!((a=n.state.callTicket)&&a.length>0)){e.next=9;break}return n.setState({calling:!0,currentCall:a[0]}),t=a[0].ticket_number.toString(),r=a[0].counter.counter_code.toString(),e.next=9,je.a.letCall(t,r).then((function(e){e&&(console.log("response: ",e),setTimeout((function(){n.setState((function(e){var a=e.ticketCalled,t=Object(ye.a)(e.callTicket),n=t[0],r=t.slice(1);return n.iscallNext?{callTicket:r,ticketCalled:[n].concat(Object(xe.a)(a)),calling:!1}:{callTicket:r,calling:!1}}))}),1e3))}));case 9:case"end":return e.stop()}}),e)}))),n.shoutCaller=function(){var e=Object(h.a)(E.a.mark((function e(a){var t,r,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.calling){e.next=7;break}return n.setState({calling:!0}),t=a.ticket_number.toString(),r=a.counter.counter_code.toString(),e.next=6,je.a.letCall(t,r).then((function(e){console.log("next",e),c&&n.setState({calling:!1})}));case 6:c=e.sent;case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),n.state={audioList:null,socket:null,calling:!1,callTicket:[],currentCall:null,ticketCalled:[],test:"halo aja"},n}return Object(m.a)(t,[{key:"componentDidUpdate",value:function(e,a){this.state.callTicket!==a.callTicket&&(console.log("callTicket updated"),this.recursiveCalling())}},{key:"componentDidMount",value:function(){document.body.classList.add("monitor-page"),this.getAudio(),this.setupSocket()}},{key:"componentWillUnmount",value:function(){this.dismantleSocket()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Se.Provider,{value:this.state.audioList},r.a.createElement(Te,null)),r.a.createElement("div",{className:"monitor-wrapper mt-2"},r.a.createElement(_e,{calling:this.state.calling,currentCall:this.state.currentCall,ticketCalled:this.state.ticketCalled})),r.a.createElement("button",{onClick:this.recursiveCalling,className:"btn btn-outline-success my-2 my-sm-0"},"Play caller"))}}]),t}(n.Component);function Pe(){return Object(n.useEffect)((function(){return document.body.classList.add("error-page"),f.fixLoginRegisterHeight(),function(){document.body.classList.remove("error-page")}}),[]),r.a.createElement("div",{className:"error-page vcenter-box"},r.a.createElement("h2",{className:"headline text-warning"}," 404"),r.a.createElement("div",{className:"error-content"},r.a.createElement("h3",{className:"text-center"},r.a.createElement("i",{className:"fas fa-exclamation-triangle text-warning"})," Oops! Page not found."),r.a.createElement("p",{className:"text-center"},"We could not find the page you were looking for.")))}function Re(){var e=Object(n.useState)(["dummy Service"]),a=Object(R.a)(e,2),t=a[0],c=a[1],s=Object(n.useState)({}),l=Object(R.a)(s,2),o=l[0],i=l[1],m=Object(n.useState)(!0),u=Object(R.a)(m,2),d=u[0],f=u[1],p=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";ee.makeTicket(e).then((function(e){e.data.serviceName=a,i(e.data)})).catch((function(e){console.log(e)}))};return r.a.useEffect((function(){return document.body.classList.add("kiosk-page"),console.log("get available services"),ee.getServices().then((function(e){c(e.data)})).catch((function(e){console.log(e)})),function(){document.body.classList.remove("kiosk-page")}}),[]),r.a.useEffect((function(){d&&f(!1)}),[o]),r.a.createElement("div",null,r.a.createElement("div",{className:"card kiosk-box d-print-none"},r.a.createElement("div",{className:"card-header"},"Print Ticket"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"d-flex flex-wrap justify-content-center"},t.map((function(e,a){return r.a.createElement("button",{key:a,className:"print-button btn bg-gradient-primary btn-lg btn-block",onClick:function(){return function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log("print this"),console.log(e),p(e,a)}(e._id,e.name)}},e.name)}))))),o&&r.a.createElement(ge,{ticket:o}))}var Ue=function(e){var a={};return e.username?e.username.length<3&&(a.username="Username minimal containt 3 character"):a.username="Username is required",e.password||(a.password="Password is required"),e.passwordConfirm?e.passwordConfirm!==e.password&&(a.passwordConfirm="Password not match"):a.passwordConfirm="Please Re-type password",a};function Ae(e){var a=Object(n.useState)([]),t=Object(R.a)(a,2),c=t[0],s=t[1],o=q((function(a){j.register(i.username,i.password,i.roles,i.fullname).then((function(a){console.log(a.data),D("success",a.data.message),e.history.push("/login")})).catch((function(e){D("error",e.response.data.message)}))}),Ue),i=o.values,m=o.errors,u=o.handleChange,d=o.handleSubmit;return Object(n.useEffect)((function(){return j.getRoles().then((function(e){console.log(e.data),s(e.data)}),(function(e){})),document.body.classList.add("register-page"),f.fixLoginRegisterHeight(),function(){document.body.classList.remove("register-page")}}),[]),r.a.createElement("div",{className:"register-box"},r.a.createElement("div",{className:"register-logo"},r.a.createElement("b",null,"Admin"),"LTE"),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body register-card-body"},r.a.createElement("p",{className:"login-box-msg"},"Register a new membership"),r.a.createElement("form",{onSubmit:d},r.a.createElement("div",{className:"input-group mb-3 is-invalid"},r.a.createElement("input",{type:"text",className:"form-control ".concat(m.fullname&&"is-invalid"),placeholder:"Full name",onChange:u,name:"fullname",value:i.fullname||""}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{className:"fas fa-id-card"}))),m.fullname&&r.a.createElement("span",{className:"error invalid-feedback"},m.fullname?m.fullname:"not valid")),r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",className:"form-control ".concat(m.username&&"is-invalid"),placeholder:"Username",onChange:u,name:"username",value:i.username||""}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{className:"fas fa-user"}))),m.username&&r.a.createElement("span",{className:"error invalid-feedback"},m.username?m.username:"not valid")),r.a.createElement("div",{className:"form-group mb-3"},r.a.createElement("label",null,"Select Roles"),r.a.createElement("select",{className:"custom-select",multiple:!0,name:"roles",onChange:u,value:i.roles||[],size:"3"},c.map((function(e,a){return r.a.createElement("option",{key:a,value:e.name},e.name)})))),r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"password",className:"form-control ".concat(m.password&&"is-invalid"),placeholder:"Password",onChange:u,name:"password",value:i.password||""}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{className:"fas fa-lock"}))),m.password&&r.a.createElement("span",{className:"error invalid-feedback"},m.password?m.password:"not valid")),r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"password",className:"form-control ".concat(m.passwordConfirm&&"is-invalid"),placeholder:"Retype password",onChange:u,name:"passwordConfirm",value:i.passwordConfirm||""}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("span",{className:"fas fa-lock"}))),m.passwordConfirm&&r.a.createElement("span",{className:"error invalid-feedback"},m.passwordConfirm?m.passwordConfirm:"not valid")),r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Register")),r.a.createElement("p",{className:"mb-0"},r.a.createElement(l.b,{to:"/login",className:"text-center"},"already have a membership")))))}var Be=function(){return r.a.createElement(l.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",render:function(){return r.a.createElement(o.a,{to:"dashboard"})}}),r.a.createElement(o.b,{exact:!0,path:"/login",component:we}),r.a.createElement(o.b,{exact:!0,path:"/register",component:Ae}),r.a.createElement(o.b,{path:"/dashboard",render:function(e){return r.a.createElement(he,e)}}),r.a.createElement(o.b,{path:"/monitor"},r.a.createElement(Le,null)),r.a.createElement(o.b,{path:"/kiosk"},r.a.createElement(Ne,null)),r.a.createElement(o.b,{path:"/nopkiosk"},r.a.createElement(Re,null)),r.a.createElement(o.b,null,r.a.createElement(Pe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},42:function(e,a){var t=function(){var e=0;return setTimeout((function(){c("audioTO")}),e),e+=1100,setTimeout((function(){c("audioCOUNTER")}),e),e+=1100},n=function(e,a){setTimeout((function(){c("audio"+a)}),1100*e)},r=function(e){for(var a=0,t=Array.from(e),r=e,c=t.length-1,s=0,l=0;l<t.length;l++){var o=t[l]*Math.pow(10,c-l);if(o>9999);else{if(r<20){n(s,r),a+=1100,s++,r=0;break}0!==o&&(n(s,o),a+=1100,s++)}if(0===(r-=o))break}return a},c=function(e){var a=document.getElementById(e).play();null!==a&&a.catch((function(){document.getElementById(e).pause(),document.getElementById(e).currentTime=0,document.getElementById(e).play()}))},s={letCall:function(e,a){return new Promise((function(n){var c=0;setTimeout((function(){c=r(e),setTimeout((function(){c=t(),setTimeout((function(){c=r(a),setTimeout((function(){console.log("call done"),n(!0)}),c)}),c)}),c)}),c)}))}};e.exports=s},70:function(e,a,t){e.exports=t(125)},75:function(e,a,t){}},[[70,1,2]]]);
//# sourceMappingURL=main.a81206ab.chunk.js.map